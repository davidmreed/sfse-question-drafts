# Question

*This is a **canonical question and answer** developed by the community to help address common questions. If you've been directed here, or your question has been closed as a duplicate, please look through the resources here and use them to shape more specific questions. To browse all canonical questions and answers, including more unit test resources, navigate to the [`canonical-qa`](https://salesforce.stackexchange.com/questions/tagged/canonical-qa) tag.*

I'm trying to test code that sends email or uses the Connect API. I'm getting errors that tell me what I want to do is not supported. How do I test this type of code?

# Answer

Summarize situations where one should use Test.isRunningTest() to gate functionality in test context.

Sending email
Connect API
...
Briefly introduce the idea of dependency injection to test behavior of code that uses this type of functionality and link to outside resources.

